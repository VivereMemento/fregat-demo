'use strict';

(function () {
	'use strict';

	svg4everybody();

	var t;
	var btnUp = getElement('.btn-up');
	btnUp.addEventListener('click', up);
	function up() {

		var top = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
		console.log(top);

		if (top > 0) {
			window.scrollBy(0, -50);
			t = setTimeout(up, 2);
		} else {
			clearTimeout(t);
		};

		return false;
	}
})();

function getElement(elem) {
	return document.querySelector(elem);
}

function getAllElements(elem) {
	return document.querySelectorAll(elem);
}
'use strict';

var addCoutnInput = function () {
	var init = function init() {
		if (wrapInput.length) {
			_setUpListners();
		}
	};
	var _setUpListners = function _setUpListners() {
		document.addEventListener('click', addCount);
	};

	var basketInput = document.querySelectorAll('.params-js');
	var countInput = document.querySelectorAll('.js-add-count');
	var wrapInput = basketInput.length === 0 ? countInput : basketInput;
	var basketTotalCount = getElement('.basket__total-count');

	function addCount(e) {
		Array.from(wrapInput).forEach(function (item) {
			var input = item.querySelector('input'),
			    count = parseFloat(input.value),
			    inputBtnUp = item.querySelector('.add-input__btn_up'),
			    inputBtnDown = item.querySelector('.add-input__btn_down'),
			    startPrice = void 0,
			    totalPrice = void 0,
			    startPriceValue = void 0,
			    totalPriceValue = void 0,
			    basketTotalCountValue = void 0,
			    basketDeleteBtn = void 0;

			if (item.classList.contains('series__table-product-params')) {
				startPrice = item.querySelector('.price-js > span');
				totalPrice = item.querySelector('.total-price-js > span');
				startPriceValue = parseFloat(startPrice.innerText);
				totalPriceValue = parseFloat(totalPrice.innerText);
				// basketTotalCountValue = parseFloat(basketTotalCount.innerText);
			}

			if (e.target === basketDeleteBtn) {
				setTimeout(function () {
					var inputs = document.getElementsByName('count');
					var count = 0;

					Array.from(inputs).forEach(function (input) {
						count += parseFloat(input.value);
					});
					basketTotalCount.innerText = count;
				});
			}

			if (isNaN(input.value) || input.value === '') {
				input.value = 1;
				// basketTotalCount.innerText = ++basketTotalCountValue;
				return;
			}

			if (e.target === inputBtnUp) {
				count++;
				input.value = count;

				if (totalPrice) {
					// basketTotalCount.innerText = ++basketTotalCountValue;
					totalPrice.innerText = (totalPriceValue + startPriceValue).toFixed(2);
				}
			}

			if (e.target === inputBtnDown) {
				if (count === 1) {
					return;
				}
				count--;
				input.value = count;
				if (totalPrice) {
					// basketTotalCount.innerText = --basketTotalCountValue;
					totalPrice.innerText = (totalPriceValue - startPriceValue).toFixed(2);
				}
			}

			if (totalPrice) {
				input.addEventListener('input', function () {
					var inputs = document.getElementsByName('count');
					var inputValue = parseFloat(input.value);
					var count = 0;

					Array.from(inputs).forEach(function (input) {
						if (isNaN(input.value) || input.value === '') {
							count += 0;
							inputValue = 1;
							return;
						};
						count += parseFloat(input.value);
					});
					totalPrice.innerText = (startPriceValue * inputValue).toFixed(2);
					basketTotalCount.innerText = count;
				});
			}
		});
	}

	return {
		init: init
	};
}();

addCoutnInput.init();
'use strict';

var menu = function () {

	var init = function init() {
		_setUpListners();
	};
	var _setUpListners = function _setUpListners() {
		window.addEventListener('scroll', checkSlide);
		if (window.innerWidth <= 480) {
			window.removeEventListener('scroll', checkSlide);
		}
		menuBtn.addEventListener('click', openMenu);
	};

	var menu = getElement('.menu__inner');
	var menuHeight = menu.clientHeight;
	var menuBtn = getElement('.menu__title');
	var footer = getElement('footer');
	var menuOfSetTop = menu.offsetTop;

	function checkSlide() {

		var footerOffSetTop = footer.offsetTop;

		if (window.scrollY >= menuOfSetTop) {
			menu.classList.add('sticked');
		} else {
			menu.classList.remove('sticked');
		}

		if (window.scrollY + menu.clientHeight >= footerOffSetTop + 15) {
			menu.classList.add('unsticked');
		} else {
			menu.classList.remove('unsticked');
		};
	}

	function openMenu() {
		var menuList = menu.querySelector('.menu__list');
		var menuListHeight = menuList.clientHeight;

		if (menu.clientHeight < menuListHeight) {
			menu.style.height = menuHeight + menuListHeight + 'px';
		} else {
			menu.style.height = menuHeight + 'px';
		}
	}

	return {
		init: init
	};
}();

menu.init();
'use strict';

var mobNav = function () {
    var init = function init() {
        _setUpListeners();
    };

    var _setUpListeners = function _setUpListeners() {
        navBtn.addEventListener('click', _toggleNav);
        navWrap.addEventListener('click', _action);
    };

    var partOne = document.querySelector('.header__part-one');
    var navWrap = document.querySelector('.header__part-two');
    var partThree = document.querySelector('.header__part-three');
    var navBtn = document.querySelector('.menu-trigger');
    var navLinks = document.querySelectorAll(".nav__link_arrow");
    var loginBtn = document.querySelector('.header__login-btn');
    var netbookMenu = document.querySelector('.netbook-menu-wrap');

    function _toggleNav() {
        var stylesNavWrap = getComputedStyle(navWrap);
        var stylesLoginBtn = getComputedStyle(loginBtn);
        var posOfNavWrap = parseFloat(stylesNavWrap.left);
        var posOfLoginBtn = parseFloat(stylesLoginBtn.right);
        var widthOfLoginBtn = loginBtn.offsetWidth;

        posOfNavWrap === 0 ? navWrap.style.left = -100 + '%' : navWrap.style.left = 0;
        posOfLoginBtn === 0 ? loginBtn.style.right = widthOfLoginBtn + 'px' : loginBtn.style.right = 0;
        navBtn.classList.toggle('active');
        partOne.classList.toggle('passive');
        partThree.classList.toggle('active');

        if (window.outerWidth > 580) {
            netbookMenu.classList.toggle('active');
        }
    }

    function _action(e) {

        if (e.target.nextElementSibling.style.maxHeight) {
            e.target.nextElementSibling.style.maxHeight = null;
            e.target.classList.remove('active');
            return;
        }
        navLinks.forEach(function (link) {
            link.classList.remove('active');
            link.nextElementSibling.style.maxHeight = null;

            if (e.target === link) {
                var panel = e.target.nextElementSibling;
                panel.style.maxHeight = panel.scrollHeight + "px";
                link.classList.add('active');
            }
        });
    }

    return {
        init: init
    };
}();
mobNav.init();
'use strict';

var owlSlider = function () {

    var init = function init() {
        _setUpListeners();
    };

    var _setUpListeners = function _setUpListeners() {
        window.addEventListener('load', function () {
            if (window.outerWidth <= 480) {
                _owlInitialization();
            }

            if (window.outerWidth <= 780) {
                _initializeSlider();
            }
        });

        window.addEventListener('resize', function () {
            window.outerWidth > 480 ? $('.products__list').trigger('destroy.owl.carousel') : _owlInitialization();
            window.outerWidth > 780 ? $('.slider__list').trigger('destroy.owl.carousel') : _initializeSlider();
        });
    };

    function _initializeSlider() {
        $('.slider__list').addClass('owl-carousel owl-theme');
        $('.slider__list').owlCarousel({
            loop: true,
            nav: false,
            dots: true,
            items: 1,
            autoplay: true,
            autoplayTimeout: 3000,
            autoplayHoverPause: true,
            responsive: {
                0: {
                    items: 1
                }
            }
        });
    }

    function _owlInitialization() {
        $('.products__list').addClass('owl-carousel owl-theme');
        $('.products__list').owlCarousel({
            loop: true,
            nav: true,
            dots: true,
            items: 1,
            responsive: {
                0: {
                    items: 1
                }
            }
        });
    }

    return {
        init: init
    };
}();
owlSlider.init();
'use strict';

var search = function () {

	var init = function init() {
		_setUpListners();
	};
	var _setUpListners = function _setUpListners() {
		searchBnt.addEventListener('click', toggleSearch);
	};

	var searchBnt = getElement('#search-btn');
	var searchBlock = getElement('.search');
	var searchWrap = getElement('.search__wrap');

	function toggleSearch() {

		if (searchBlock.style.display === 'block') {
			var transitionEnd = function transitionEnd() {
				searchBlock.style.display = 'none';
				searchWrap.removeEventListener('transitionend', transitionEnd);
			};

			searchWrap.addEventListener('transitionend', transitionEnd);
		} else {
			searchBlock.style.display = 'block';
		}

		setTimeout(function () {
			searchWrap.classList.toggle('opened');
		});
	}

	return {
		init: init
	};
}();

search.init();
'use strict';

var mySlideshow = function () {

	var slides = getAllElements('.slider__item');
	var dotsContainer = getElement('.dots');
	var dots = getAllElements('.dot');
	var slideIndex = 0;

	var init = function init() {
		if (window.innerWidth <= 780) {
			// _setUpListners();
		}
	};

	var _setUpListners = function _setUpListners() {
		dotsContainer.addEventListener('click', _currentSlide);
		_showSlides();
		setInterval(_showSlides, 5000); // Change image every 2 seconds
	};

	function _currentSlide(e) {
		var i = 0;

		dots.forEach(function (item, index) {
			if (e.target === item) {
				i = index;
			}
		});

		_showSlides(slideIndex = i);
	}

	function _showSlides() {

		slides.forEach(function (item) {
			item.classList.remove('fade');
			item.style.display = "none";
		});

		dots.forEach(function (item) {
			item.className = item.className.replace(" active fade", "");
		});

		slideIndex++;

		if (slideIndex > slides.length) {
			slideIndex = 1;
		};

		slides[slideIndex - 1].style.display = "flex";
		slides[slideIndex - 1].classList.add('fade');
		dots[slideIndex - 1].className += " active fade";
	}

	return {
		init: init
	};
}();

mySlideshow.init();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIl9hZGQtY291bnQtaW5wdXQuanMiLCJfbWVudS5qcyIsIl9tb2JpbGUtbmF2LmpzIiwiX293bC1jYXJvdXNlbC5qcyIsIl9zZWFyY2guanMiLCJfc2xpZGVyLmpzIl0sIm5hbWVzIjpbInN2ZzRldmVyeWJvZHkiLCJ0IiwiYnRuVXAiLCJnZXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwIiwidG9wIiwiTWF0aCIsIm1heCIsImRvY3VtZW50IiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJzY3JvbGxCeSIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJlbGVtIiwicXVlcnlTZWxlY3RvciIsImdldEFsbEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZENvdXRuSW5wdXQiLCJpbml0Iiwid3JhcElucHV0IiwibGVuZ3RoIiwiX3NldFVwTGlzdG5lcnMiLCJhZGRDb3VudCIsImJhc2tldElucHV0IiwiY291bnRJbnB1dCIsImJhc2tldFRvdGFsQ291bnQiLCJlIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsImlucHV0IiwiaXRlbSIsImNvdW50IiwicGFyc2VGbG9hdCIsInZhbHVlIiwiaW5wdXRCdG5VcCIsImlucHV0QnRuRG93biIsInN0YXJ0UHJpY2UiLCJ0b3RhbFByaWNlIiwic3RhcnRQcmljZVZhbHVlIiwidG90YWxQcmljZVZhbHVlIiwiYmFza2V0VG90YWxDb3VudFZhbHVlIiwiYmFza2V0RGVsZXRlQnRuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbm5lclRleHQiLCJ0YXJnZXQiLCJpbnB1dHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsImlzTmFOIiwidG9GaXhlZCIsImlucHV0VmFsdWUiLCJtZW51IiwiY2hlY2tTbGlkZSIsImlubmVyV2lkdGgiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibWVudUJ0biIsIm9wZW5NZW51IiwibWVudUhlaWdodCIsImNsaWVudEhlaWdodCIsImZvb3RlciIsIm1lbnVPZlNldFRvcCIsIm9mZnNldFRvcCIsImZvb3Rlck9mZlNldFRvcCIsInNjcm9sbFkiLCJhZGQiLCJyZW1vdmUiLCJtZW51TGlzdCIsIm1lbnVMaXN0SGVpZ2h0Iiwic3R5bGUiLCJoZWlnaHQiLCJtb2JOYXYiLCJfc2V0VXBMaXN0ZW5lcnMiLCJuYXZCdG4iLCJfdG9nZ2xlTmF2IiwibmF2V3JhcCIsIl9hY3Rpb24iLCJwYXJ0T25lIiwicGFydFRocmVlIiwibmF2TGlua3MiLCJsb2dpbkJ0biIsIm5ldGJvb2tNZW51Iiwic3R5bGVzTmF2V3JhcCIsImdldENvbXB1dGVkU3R5bGUiLCJzdHlsZXNMb2dpbkJ0biIsInBvc09mTmF2V3JhcCIsImxlZnQiLCJwb3NPZkxvZ2luQnRuIiwicmlnaHQiLCJ3aWR0aE9mTG9naW5CdG4iLCJvZmZzZXRXaWR0aCIsInRvZ2dsZSIsIm91dGVyV2lkdGgiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJtYXhIZWlnaHQiLCJsaW5rIiwicGFuZWwiLCJzY3JvbGxIZWlnaHQiLCJvd2xTbGlkZXIiLCJfb3dsSW5pdGlhbGl6YXRpb24iLCJfaW5pdGlhbGl6ZVNsaWRlciIsIiQiLCJ0cmlnZ2VyIiwiYWRkQ2xhc3MiLCJvd2xDYXJvdXNlbCIsImxvb3AiLCJuYXYiLCJkb3RzIiwiaXRlbXMiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsInJlc3BvbnNpdmUiLCJzZWFyY2giLCJzZWFyY2hCbnQiLCJ0b2dnbGVTZWFyY2giLCJzZWFyY2hCbG9jayIsInNlYXJjaFdyYXAiLCJkaXNwbGF5IiwidHJhbnNpdGlvbkVuZCIsIm15U2xpZGVzaG93Iiwic2xpZGVzIiwiZG90c0NvbnRhaW5lciIsInNsaWRlSW5kZXgiLCJfY3VycmVudFNsaWRlIiwiX3Nob3dTbGlkZXMiLCJzZXRJbnRlcnZhbCIsImkiLCJpbmRleCIsImNsYXNzTmFtZSIsInJlcGxhY2UiXSwibWFwcGlu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TUFBeEIsRUFBZ0M7QUFBQ3VHLGdCQUFhLENBQWI7QUFBZTs7QUFFaERGLFNBQU9FLGFBQVcsQ0FBbEIsRUFBcUJ0RCxLQUFyQixDQUEyQmlELE9BQTNCLEdBQXFDLE1BQXJDO0FBQ0FHLFNBQU9FLGFBQVcsQ0FBbEIsRUFBcUJoRixTQUFyQixDQUErQnNCLEdBQS9CLENBQW1DLE1BQW5DO0FBQ0EwQyxPQUFLZ0IsYUFBVyxDQUFoQixFQUFtQk0sU0FBbkIsSUFBZ0MsY0FBaEM7QUFDQTs7QUFJRCxRQUFPO0FBQ0wvRyxRQUFNQTtBQURELEVBQVA7QUFJQSxDQTFEbUIsRUFBcEI7O0FBNERBc0csWUFBWXRHLElBQVoiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcblx0c3ZnNGV2ZXJ5Ym9keSgpO1xyXG5cclxuXHR2YXIgdDtcclxuXHRjb25zdCBidG5VcCA9IGdldEVsZW1lbnQoJy5idG4tdXAnKTtcclxuXHRidG5VcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwKTtcclxuXHRmdW5jdGlvbiB1cCgpIHtcclxuXHJcblx0XHRsZXQgdG9wID0gTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCk7XHJcblx0XHRjb25zb2xlLmxvZyh0b3ApO1xyXG5cclxuXHRcdGlmKHRvcCA+IDApIHtcclxuXHRcdFx0d2luZG93LnNjcm9sbEJ5KDAsIC01MCk7XHJcblx0XHRcdHQgPSBzZXRUaW1lb3V0KHVwLCAyKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0KVxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG59KSgpO1xyXG5cclxuZnVuY3Rpb24gZ2V0RWxlbWVudChlbGVtKSB7XHJcblx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzKGVsZW0pIHtcclxuXHRyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtKTtcclxufVxyXG4iLCJjb25zdCBhZGRDb3V0bklucHV0ID0gKGZ1bmN0aW9uICgpIHtcclxuXHRjb25zdCBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYod3JhcElucHV0Lmxlbmd0aCkge1xyXG5cdFx0XHRfc2V0VXBMaXN0bmVycygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0Y29uc3QgX3NldFVwTGlzdG5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkQ291bnQpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGJhc2tldElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhcmFtcy1qcycpO1xyXG5cdGNvbnN0IGNvdW50SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYWRkLWNvdW50Jyk7XHJcblx0Y29uc3Qgd3JhcElucHV0ID0gYmFza2V0SW5wdXQubGVuZ3RoID09PSAwID8gY291bnRJbnB1dCA6IGJhc2tldElucHV0O1xyXG5cdGNvbnN0IGJhc2tldFRvdGFsQ291bnQgPSBnZXRFbGVtZW50KCcuYmFza2V0X190b3RhbC1jb3VudCcpO1xyXG5cclxuXHRmdW5jdGlvbiBhZGRDb3VudChlKSB7XHJcbiAgICAgICAgQXJyYXkuZnJvbSh3cmFwSW5wdXQpLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdGxldCBpbnB1dCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXQnKSxcclxuXHRcdFx0XHRjb3VudCA9IHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpLFxyXG5cdFx0XHRcdGlucHV0QnRuVXAgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtaW5wdXRfX2J0bl91cCcpLFxyXG5cdFx0XHRcdGlucHV0QnRuRG93biA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmFkZC1pbnB1dF9fYnRuX2Rvd24nKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0UHJpY2UsXHJcblx0XHRcdFx0dG90YWxQcmljZSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0UHJpY2VWYWx1ZSxcclxuXHRcdFx0XHR0b3RhbFByaWNlVmFsdWUsXHJcblx0XHRcdFx0YmFza2V0VG90YWxDb3VudFZhbHVlLFxyXG5cdFx0XHRcdGJhc2tldERlbGV0ZUJ0bjtcclxuXHJcblx0XHRcdGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnc2VyaWVzX190YWJsZS1wcm9kdWN0LXBhcmFtcycpKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFByaWNlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucHJpY2UtanMgPiBzcGFuJyk7XHJcblx0XHRcdFx0dG90YWxQcmljZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnRvdGFsLXByaWNlLWpzID4gc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRQcmljZVZhbHVlID0gcGFyc2VGbG9hdChzdGFydFByaWNlLmlubmVyVGV4dCk7XHJcblx0XHRcdFx0dG90YWxQcmljZVZhbHVlID0gcGFyc2VGbG9hdCh0b3RhbFByaWNlLmlubmVyVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAvLyBiYXNrZXRUb3RhbENvdW50VmFsdWUgPSBwYXJzZUZsb2F0KGJhc2tldFRvdGFsQ291bnQuaW5uZXJUZXh0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGUudGFyZ2V0ID09PSBiYXNrZXREZWxldGVCdG4pIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnY291bnQnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGlucHV0cykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2tldFRvdGFsQ291bnQuaW5uZXJUZXh0ID0gY291bnQ7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzTmFOKGlucHV0LnZhbHVlKSB8fCBpbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgIC8vIGJhc2tldFRvdGFsQ291bnQuaW5uZXJUZXh0ID0gKytiYXNrZXRUb3RhbENvdW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PT0gaW5wdXRCdG5VcCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gY291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodG90YWxQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhc2tldFRvdGFsQ291bnQuaW5uZXJUZXh0ID0gKytiYXNrZXRUb3RhbENvdW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZS5pbm5lclRleHQgPSAodG90YWxQcmljZVZhbHVlICsgc3RhcnRQcmljZVZhbHVlKS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBpbnB1dEJ0bkRvd24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgaWYodG90YWxQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhc2tldFRvdGFsQ291bnQuaW5uZXJUZXh0ID0gLS1iYXNrZXRUb3RhbENvdW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZS5pbm5lclRleHQgPSAodG90YWxQcmljZVZhbHVlIC0gc3RhcnRQcmljZVZhbHVlKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHRcdFx0aWYodG90YWxQcmljZSkge1xyXG5cdFx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0bGV0IGlucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdjb3VudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlID0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0XHRsZXQgY291bnQgPSAwO1xyXG5cclxuXHRcdFx0XHRcdEFycmF5LmZyb20oaW5wdXRzKS5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGlucHV0LnZhbHVlKSB8fCBpbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHRcdFx0XHRcdFx0Y291bnQgKz0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0XHR9KTtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlLmlubmVyVGV4dCA9IChzdGFydFByaWNlVmFsdWUgKiBpbnB1dFZhbHVlKS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcdFx0YmFza2V0VG90YWxDb3VudC5pbm5lclRleHQgPSBjb3VudDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0pO1xyXG5cdH0gXHJcblx0XHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogaW5pdFxyXG5cdH1cclxuXHJcbn0pKCk7XHJcblxyXG5hZGRDb3V0bklucHV0LmluaXQoKTsiLCJjb25zdCBtZW51ID0gKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0Y29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0X3NldFVwTGlzdG5lcnMoKTtcclxuXHR9O1xyXG5cdGNvbnN0IF9zZXRVcExpc3RuZXJzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNoZWNrU2xpZGUpO1xyXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDQ4MCkge1xyXG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY2hlY2tTbGlkZSk7XHJcblx0XHR9XHJcblx0XHRtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1lbnUpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IG1lbnUgPSBnZXRFbGVtZW50KCcubWVudV9faW5uZXInKTtcclxuXHRsZXQgbWVudUhlaWdodCA9IG1lbnUuY2xpZW50SGVpZ2h0O1xyXG5cdGNvbnN0IG1lbnVCdG4gPSBnZXRFbGVtZW50KCcubWVudV9fdGl0bGUnKTtcclxuXHRjb25zdCBmb290ZXIgPSBnZXRFbGVtZW50KCdmb290ZXInKTtcclxuXHRsZXQgbWVudU9mU2V0VG9wID0gbWVudS5vZmZzZXRUb3A7XHJcblxyXG5cdGZ1bmN0aW9uIGNoZWNrU2xpZGUoKSB7XHJcblxyXG5cdFx0bGV0IGZvb3Rlck9mZlNldFRvcCA9IGZvb3Rlci5vZmZzZXRUb3A7XHJcblxyXG5cdFx0aWYgKHdpbmRvdy5zY3JvbGxZID49IG1lbnVPZlNldFRvcCkge1xyXG5cdFx0XHRtZW51LmNsYXNzTGlzdC5hZGQoJ3N0aWNrZWQnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnc3RpY2tlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgod2luZG93LnNjcm9sbFkgKyBtZW51LmNsaWVudEhlaWdodCkgPj0gZm9vdGVyT2ZmU2V0VG9wICsgMTUpIHtcclxuXHRcdFx0bWVudS5jbGFzc0xpc3QuYWRkKCd1bnN0aWNrZWQnKVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bWVudS5jbGFzc0xpc3QucmVtb3ZlKCd1bnN0aWNrZWQnKVxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9wZW5NZW51KCkge1xyXG5cdFx0Y29uc3QgbWVudUxpc3QgPSBtZW51LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19saXN0Jyk7XHJcblx0XHRsZXQgbWVudUxpc3RIZWlnaHQgPSBtZW51TGlzdC5jbGllbnRIZWlnaHQ7XHJcblxyXG5cdFx0aWYgKG1lbnUuY2xpZW50SGVpZ2h0IDwgbWVudUxpc3RIZWlnaHQpIHtcclxuXHRcdFx0bWVudS5zdHlsZS5oZWlnaHQgPSBtZW51SGVpZ2h0ICsgbWVudUxpc3RIZWlnaHQgKyAncHgnO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bWVudS5zdHlsZS5oZWlnaHQgPSBtZW51SGVpZ2h0ICsgJ3B4JztcclxuXHRcdH1cclxuXHR9XHJcblx0XHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogaW5pdFxyXG5cdH1cclxuXHJcbn0pKCk7XHJcblxyXG5tZW51LmluaXQoKTsiLCJjb25zdCBtb2JOYXYgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc2V0VXBMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgX3NldFVwTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG5hdkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90b2dnbGVOYXYpO1xyXG4gICAgICAgIG5hdldyYXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfYWN0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcGFydE9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3BhcnQtb25lJyk7XHJcbiAgICBjb25zdCBuYXZXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fcGFydC10d28nKTtcclxuICAgIGNvbnN0IHBhcnRUaHJlZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3BhcnQtdGhyZWUnKTtcclxuICAgIGNvbnN0IG5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LXRyaWdnZXInKTtcclxuICAgIGNvbnN0IG5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2xpbmtfYXJyb3dcIik7XHJcbiAgICBjb25zdCBsb2dpbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvZ2luLWJ0bicpO1xyXG4gICAgY29uc3QgIG5ldGJvb2tNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldGJvb2stbWVudS13cmFwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gX3RvZ2dsZU5hdigpIHtcclxuICAgICAgICBsZXQgc3R5bGVzTmF2V3JhcCA9IGdldENvbXB1dGVkU3R5bGUobmF2V3JhcCk7XHJcbiAgICAgICAgbGV0IHN0eWxlc0xvZ2luQnRuID0gZ2V0Q29tcHV0ZWRTdHlsZShsb2dpbkJ0bik7XHJcbiAgICAgICAgbGV0IHBvc09mTmF2V3JhcCA9IHBhcnNlRmxvYXQoc3R5bGVzTmF2V3JhcC5sZWZ0KTtcclxuICAgICAgICBsZXQgcG9zT2ZMb2dpbkJ0biA9IHBhcnNlRmxvYXQoc3R5bGVzTG9naW5CdG4ucmlnaHQpO1xyXG4gICAgICAgIGxldCB3aWR0aE9mTG9naW5CdG4gPSBsb2dpbkJ0bi5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAgICAgcG9zT2ZOYXZXcmFwID09PSAwID8gbmF2V3JhcC5zdHlsZS5sZWZ0ID0gLTEwMCArICclJyA6IG5hdldyYXAuc3R5bGUubGVmdCA9IDA7XHJcbiAgICAgICAgcG9zT2ZMb2dpbkJ0biA9PT0gMCA/IGxvZ2luQnRuLnN0eWxlLnJpZ2h0ID0gd2lkdGhPZkxvZ2luQnRuICsgJ3B4JyA6IGxvZ2luQnRuLnN0eWxlLnJpZ2h0ID0gMDtcclxuICAgICAgICBuYXZCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgcGFydE9uZS5jbGFzc0xpc3QudG9nZ2xlKCdwYXNzaXZlJyk7XHJcbiAgICAgICAgcGFydFRocmVlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZiAod2luZG93Lm91dGVyV2lkdGggPiA1ODApIHtcclxuICAgICAgICAgICAgbmV0Ym9va01lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9hY3Rpb24oZSkge1xyXG5cclxuICAgICAgICBpZiAoZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLm1heEhlaWdodCkge1xyXG4gICAgICAgICAgICBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmF2TGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgbGluay5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmKGUudGFyZ2V0ID09PSBsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFuZWwgPSBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBwYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBwYW5lbC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbml0OiBpbml0XHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vYk5hdi5pbml0KCk7XHJcbiIsImNvbnN0IG93bFNsaWRlciA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc2V0VXBMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgX3NldFVwTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm91dGVyV2lkdGggPD0gNDgwKSB7XHJcbiAgICAgICAgICAgICAgICBfb3dsSW5pdGlhbGl6YXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5vdXRlcldpZHRoIDw9IDc4MCkge1xyXG4gICAgICAgICAgICAgICAgX2luaXRpYWxpemVTbGlkZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cub3V0ZXJXaWR0aCA+IDQ4MCA/ICQoJy5wcm9kdWN0c19fbGlzdCcpLnRyaWdnZXIoJ2Rlc3Ryb3kub3dsLmNhcm91c2VsJykgOiBfb3dsSW5pdGlhbGl6YXRpb24oKTtcclxuICAgICAgICAgICAgd2luZG93Lm91dGVyV2lkdGggPiA3ODAgPyAkKCcuc2xpZGVyX19saXN0JykudHJpZ2dlcignZGVzdHJveS5vd2wuY2Fyb3VzZWwnKSA6IF9pbml0aWFsaXplU2xpZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIF9pbml0aWFsaXplU2xpZGVyKCkge1xyXG4gICAgICAgICQoJy5zbGlkZXJfX2xpc3QnKS5hZGRDbGFzcygnb3dsLWNhcm91c2VsIG93bC10aGVtZScpO1xyXG4gICAgICAgICQoJy5zbGlkZXJfX2xpc3QnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICAgICAgbmF2OmZhbHNlLFxyXG4gICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICBpdGVtczoxLFxyXG4gICAgICAgICAgICBhdXRvcGxheTp0cnVlLFxyXG4gICAgICAgICAgICBhdXRvcGxheVRpbWVvdXQ6MzAwMCxcclxuICAgICAgICAgICAgYXV0b3BsYXlIb3ZlclBhdXNlOnRydWUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAgICAgMDp7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6MVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX293bEluaXRpYWxpemF0aW9uKCkge1xyXG4gICAgICAgICQoJy5wcm9kdWN0c19fbGlzdCcpLmFkZENsYXNzKCdvd2wtY2Fyb3VzZWwgb3dsLXRoZW1lJyk7XHJcbiAgICAgICAgJCgnLnByb2R1Y3RzX19saXN0Jykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgICAgIG5hdjp0cnVlLFxyXG4gICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICBpdGVtczoxLFxyXG4gICAgICAgICAgICByZXNwb25zaXZlOntcclxuICAgICAgICAgICAgICAgIDA6e1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgfVxyXG59KSgpO1xyXG5vd2xTbGlkZXIuaW5pdCgpO1xyXG4iLCJjb25zdCBzZWFyY2ggPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuXHRjb25zdCBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRfc2V0VXBMaXN0bmVycygpO1xyXG5cdH07XHJcblx0Y29uc3QgX3NldFVwTGlzdG5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRzZWFyY2hCbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTZWFyY2gpO1xyXG5cdH1cdFx0XHJcblxyXG5cdGNvbnN0IHNlYXJjaEJudCA9IGdldEVsZW1lbnQoJyNzZWFyY2gtYnRuJyk7XHJcblx0Y29uc3Qgc2VhcmNoQmxvY2sgPSBnZXRFbGVtZW50KCcuc2VhcmNoJyk7XHJcblx0Y29uc3Qgc2VhcmNoV3JhcCA9IGdldEVsZW1lbnQoJy5zZWFyY2hfX3dyYXAnKTtcclxuXHJcblx0ZnVuY3Rpb24gdG9nZ2xlU2VhcmNoKCkge1xyXG5cclxuXHRcdGlmIChzZWFyY2hCbG9jay5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKSB7XHJcblx0XHRcdHNlYXJjaFdyYXAuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRyYW5zaXRpb25FbmQpO1xyXG5cdFx0XHRmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xyXG5cdFx0XHRcdHNlYXJjaEJsb2NrLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdFx0c2VhcmNoV3JhcC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgdHJhbnNpdGlvbkVuZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWFyY2hCbG9jay5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWFyY2hXcmFwLmNsYXNzTGlzdC50b2dnbGUoJ29wZW5lZCcpO1xyXG5cdFx0fSlcclxuXHR9XHJcblx0XHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogaW5pdFxyXG5cdH1cclxuXHJcbn0pKCk7XHJcblxyXG5zZWFyY2guaW5pdCgpOyIsImNvbnN0IG15U2xpZGVzaG93ID0gKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0Y29uc3Qgc2xpZGVzID0gZ2V0QWxsRWxlbWVudHMoJy5zbGlkZXJfX2l0ZW0nKTtcclxuXHRjb25zdCBkb3RzQ29udGFpbmVyID0gZ2V0RWxlbWVudCgnLmRvdHMnKTtcclxuXHRjb25zdCBkb3RzID0gZ2V0QWxsRWxlbWVudHMoJy5kb3QnKTtcclxuXHRsZXQgc2xpZGVJbmRleCA9IDA7XHJcblxyXG5cdGNvbnN0IGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPD0gNzgwKSB7XHJcblx0XHRcdC8vIF9zZXRVcExpc3RuZXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBfc2V0VXBMaXN0bmVycyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGRvdHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfY3VycmVudFNsaWRlKTtcclxuXHRcdF9zaG93U2xpZGVzKCk7XHJcblx0XHRzZXRJbnRlcnZhbChfc2hvd1NsaWRlcywgNTAwMCk7IC8vIENoYW5nZSBpbWFnZSBldmVyeSAyIHNlY29uZHNcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIF9jdXJyZW50U2xpZGUoZSkge1xyXG5cdFx0bGV0IGkgPSAwO1xyXG5cclxuXHRcdGRvdHMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuXHRcdFx0aWYgKGUudGFyZ2V0ID09PSBpdGVtKSB7XHJcblx0XHRcdFx0aSA9IGluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRfc2hvd1NsaWRlcyhzbGlkZUluZGV4ID0gaSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfc2hvd1NsaWRlcygpIHtcclxuXHJcblx0XHRzbGlkZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZScpO1xyXG5cdFx0XHRpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHRkb3RzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0aXRlbS5jbGFzc05hbWUgPSBpdGVtLmNsYXNzTmFtZS5yZXBsYWNlKFwiIGFjdGl2ZSBmYWRlXCIsIFwiXCIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2xpZGVJbmRleCsrO1xyXG5cclxuXHRcdGlmIChzbGlkZUluZGV4ID4gc2xpZGVzLmxlbmd0aCkge3NsaWRlSW5kZXggPSAxfTtcclxuXHJcblx0XHRzbGlkZXNbc2xpZGVJbmRleC0xXS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblx0XHRzbGlkZXNbc2xpZGVJbmRleC0xXS5jbGFzc0xpc3QuYWRkKCdmYWRlJyk7XHJcblx0XHRkb3RzW3NsaWRlSW5kZXgtMV0uY2xhc3NOYW1lICs9IFwiIGFjdGl2ZSBmYWRlXCI7XHJcblx0fVxyXG5cclxuXHRcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdCBpbml0OiBpbml0XHJcblx0fVxyXG5cclxufSkoKTtcclxuXHJcbm15U2xpZGVzaG93LmluaXQoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
